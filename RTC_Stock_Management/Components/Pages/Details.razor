@page "/details/{id:int}"
@using System.Linq
@inject IJSRuntime JS

<div class="d-flex flex-column align-items-center justify-content-center gap-3 h-100 px-3 pt-3">
    <h1 class="text-center" tabindex="-1">Vị trí</h1>
    <div class="input-group w-75">
        <input id="location" class="form-control" @ref="codeInput"
               placeholder="Nhập vị trí..." @bind="location"
               aria-label="Filter rows by name" />
        <label for="location" class="input-group-text focus-ring focus-ring-primary">➤</label>
    </div>
    <div class="w-100 flex-grow-1 d-flex">
        <div class="scrollable-table border rounded flex-fill">
            <table class="table table-hover table-striped table-bordered border-primary mb-0">
                <thead class="table-light">
                    <tr>
                        <th></th>
                        <th style="width:30px">STT</th>
                        <th>Packing code</th>
                        <th>Vị trí</th>
                    </tr>
                </thead>
                <tbody>
                    @if (!rows.Any())
                    {
                        <tr><td colspan="3" class="text-center py-4">No matching rows</td></tr>
                    }
                    else
                    {
                        @foreach (var item in rows)
                        {
                            <tr>
                                <td><input type="checkbox"/></td>
                                <td class="text-center">@item.STT</td>
                                <td>@item.Serial</td>
                                <td> @item.Location</td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
<script src="js/home.js"></script>
@code {
    private string location = "";
    [Parameter] public int? id { get; set; }

    protected override void OnParametersSet()
    {
        // called after parameters (like id) are set or changed
        // use id here (load data, etc.)
    }
    class Row
    {
        public int STT { get; init; }
        public string Location { get; init; } = "";
        public string Serial { get; init; } = "";
    }

    private List<Row> rows = new();


    protected override void OnInitialized()
    {
        for (int i = 1; i <= 30; i++)
        {
            rows.Add(new Row
            {
                STT = i,
                Location = $"Item {i}",
                Serial = $"Serial {i}."
            });
        }
    }
    private ElementReference codeInput;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("setFocus", codeInput);
        }
    }
}